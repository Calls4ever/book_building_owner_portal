(this.webpackJsonpbook_building_owner_portal=this.webpackJsonpbook_building_owner_portal||[]).push([[0],{41:function(e,n,t){},43:function(e,n,t){},93:function(e,n,t){"use strict";t.r(n);var c=t(4),s=t.n(c),a=t(15),i=t.n(a),o=(t(41),t(42),t(6)),r=(t(43),t(5)),l=t(2),u=function(e){var n=Object(c.useState)({}),t=Object(o.a)(n,2),s=t[0],a=t[1];return Object(l.jsx)("div",{className:"signup-modal",children:Object(l.jsxs)("div",{className:"signup-modal-content",children:[Object(l.jsx)("h1",{className:"login-header",children:"Sign Up"}),Object(l.jsxs)("form",{className:"login-form",children:[Object(l.jsx)("input",{placeholder:"Name",name:"name",value:s.name,onChange:function(e){return a(Object(r.a)(Object(r.a)({},s),{},{name:e.target.value}))}}),Object(l.jsx)("input",{placeholder:"username please",name:"username",value:s.username,onChange:function(e){return a(Object(r.a)(Object(r.a)({},s),{},{username:e.target.value}))}}),Object(l.jsx)("input",{type:"password",name:"password",value:s.password,onChange:function(e){return a(Object(r.a)(Object(r.a)({},s),{},{password:e.target.value}))},placeholder:"start typing your password"}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:function(n){n.preventDefault(),console.log(s),fetch("http://localhost:3000/owners",{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({name:s.name,username:s.username,password:s.password})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),e.toggle(n)},children:"Sign Up"})})]})]})})},j=function(e){var n=Object(c.useState)({}),t=Object(o.a)(n,2),s=t[0],a=t[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),d=j[0],b=j[1],h=Object(c.useState)(""),g=Object(o.a)(h,2),O=g[0],m=g[1],p=function(e){e.preventDefault(),b(!d)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"login-header",children:"Login"}),Object(l.jsxs)("form",{className:"login-form",children:[Object(l.jsx)("input",{placeholder:"username please",name:"username",value:s.username,onChange:function(e){return a(Object(r.a)(Object(r.a)({},s),{},{username:e.target.value}))}}),Object(l.jsx)("input",{type:"password",name:"password",value:s.password,onChange:function(e){return a(Object(r.a)(Object(r.a)({},s),{},{password:e.target.value}))},placeholder:"start typing your password"}),Object(l.jsx)("label",{className:"login-message",children:O}),Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{onClick:function(n){n.preventDefault(),fetch("http://localhost:3000/owners/".concat(s.username)).then((function(e){return e.json()})).then((function(n){n?n.password===s.password?(console.log("logged in"),e.setCurrentUser(n),m("")):m("Wrong password, try 123!"):m("No username found, try tsering!")}))},children:"Log In"}),Object(l.jsx)("button",{onClick:p,children:"Sign Up"})]})]}),d&&Object(l.jsx)(u,{toggle:p})]})},d=t(32),b=t.n(d),h=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["From: ",new Date(e.booking.start_time).toLocaleDateString()," to: ",new Date(e.booking.end_time).toLocaleDateString()]}),e.booking.confirmed?Object(l.jsx)("h2",{className:"booking-confirmed",children:"Booking confirmed"}):Object(l.jsxs)("div",{className:"booking-button-div",children:[Object(l.jsx)("button",{className:"approve-button",onClick:function(){fetch("http://localhost:3000/bookings/".concat(e.booking.id),{method:"PATCH",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({confirmed:!0})}).then((function(e){return e.json()})).then((function(n){n&&fetch("http://localhost:3000/owners/".concat(e.currentUser.username)).then((function(e){return e.json()})).then((function(n){n&&e.setCurrentUser(n)}))}))},children:"Approve"}),Object(l.jsx)("button",{className:"deny-button",children:"Deny"})]})]})},g=function(e){var n=Object(c.useState)(!1),t=Object(o.a)(n,2),s=t[0],a=t[1],i=Object(c.useState)({startDate:new Date,endDate:new Date}),u=Object(o.a)(i,2),j=u[0],d=u[1];return Object(l.jsxs)("div",{className:"building-container",children:[Object(l.jsx)("h2",{children:e.building.name}),Object(l.jsx)("img",{src:e.building.img_url}),Object(l.jsxs)("h3",{children:["Location: ",e.building.location]}),Object(l.jsx)("button",{onClick:function(){return a(!s)},children:e.myBuilding?"Manage":"Book"}),s&&Object(l.jsxs)("div",{className:"date-container",children:[Object(l.jsx)("h3",{children:"From"}),Object(l.jsx)(b.a,{selected:j.startDate,onChange:function(e){return d(Object(r.a)(Object(r.a)({},j),{},{startDate:new Date(e)}))}}),Object(l.jsx)("h3",{children:"To"}),Object(l.jsx)(b.a,{selected:j.endDate,onChange:function(e){return d(Object(r.a)(Object(r.a)({},j),{},{endDate:new Date(e)}))}}),Object(l.jsx)("button",{children:"Confirm"})]}),e.myBuilding&&Object(l.jsx)("div",{children:e.building.bookings.map((function(n){return Object(l.jsx)(h,{booking:n,setCurrentUser:e.setCurrentUser,currentUser:e.currentUser})}))})]})};var O=function(){var e=Object(c.useState)({}),n=Object(o.a)(e,2),t=n[0],s=n[1];return Object(l.jsxs)("div",{className:"App",children:[!t.username&&Object(l.jsx)(j,{setCurrentUser:s}),t.username&&Object(l.jsxs)("div",{className:"main-container",children:[Object(l.jsxs)("h1",{children:["Hi, ",t.name,"!"]}),Object(l.jsxs)("div",{className:"add-building-button-div",onClick:function(){return window.alert("Add building Coming soon!")},children:[Object(l.jsx)("h1",{children:"Add Building"}),Object(l.jsx)("h1",{id:"plus",children:"+"})]}),Object(l.jsx)("div",{children:t.buildings.length>0?Object(l.jsxs)("div",{className:"my-building",children:[Object(l.jsx)("h1",{children:"My Buildings"}),Object(l.jsx)("div",{className:"building-card-container",children:t.buildings.map((function(e){return Object(l.jsx)(g,{myBuilding:!0,building:e,setCurrentUser:s,currentUser:t},e.id)}))})]}):Object(l.jsxs)("div",{className:"my-building",children:[Object(l.jsx)("h1",{children:"My Buillings"}),Object(l.jsx)("h3",{children:"You don't have any bookings! Book now from following list!"})]})})]})]})},m=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,100)).then((function(n){var t=n.getCLS,c=n.getFID,s=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),m()}},[[93,1,2]]]);
//# sourceMappingURL=main.f32d9df7.chunk.js.map